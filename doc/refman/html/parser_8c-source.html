<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FreeSDP: parser.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>parser.c</h1><a href="parser_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">  This file is part of FreeSDP</span>
00003 <span class="comment">  Copyright (C) 2001,2002,2003 Federico Montesino Pouzols &lt;fedemp@altern.org&gt;</span>
00004 <span class="comment">  </span>
00005 <span class="comment">  FreeSDP is free software; you can redistribute it and/or modify it</span>
00006 <span class="comment">  under the terms of the GNU General Public License as published by</span>
00007 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
00008 <span class="comment">  (at your option) any later version.</span>
00009 <span class="comment"></span>
00010 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
00011 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00013 <span class="comment">  GNU General Public License for more details.</span>
00014 <span class="comment"></span>
00015 <span class="comment">  You should have received a copy of the GNU General Public License</span>
00016 <span class="comment">  along with this program; if not, write to the Free Software</span>
00017 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00018 <span class="comment">*/</span>
00019 
00032 <span class="preprocessor">#include "<a class="code" href="parserpriv_8h.html">parserpriv.h</a>"</span>
00033 
<a name="l00042"></a><a class="code" href="parser_8c.html#a0">00042</a> <span class="preprocessor">#define NEXT_LINE(c)                                                \</span>
00043 <span class="preprocessor">({                                                                  \</span>
00044 <span class="preprocessor"> while ((*(c) != '\0') &amp;&amp; (*(c) != '\r') &amp;&amp; (*(c) != '\n')) {       \</span>
00045 <span class="preprocessor">    (c)++;                                                          \</span>
00046 <span class="preprocessor"> }                                                                  \</span>
00047 <span class="preprocessor"> if (*(c) == '\n') {                                                \</span>
00048 <span class="preprocessor">    (c)++;                                                          \</span>
00049 <span class="preprocessor"> } else if (*(c) == '\r') {                                         \</span>
00050 <span class="preprocessor">    (c)++;                                                          \</span>
00051 <span class="preprocessor">    if (*(c) == '\n') {                                             \</span>
00052 <span class="preprocessor">       (c)++;                                                       \</span>
00053 <span class="preprocessor">    } else {                                                        \</span>
00054 <span class="preprocessor">       return FSDPE_ILLEGAL_CHARACTER;                              \</span>
00055 <span class="preprocessor">   }                                                                \</span>
00056 <span class="preprocessor"> }                                                                  \</span>
00057 <span class="preprocessor">})</span>
00058 <span class="preprocessor"></span>
00059 <a class="code" href="group__common.html#a6">fsdp_error_t</a>
<a name="l00060"></a><a class="code" href="group__parser.html#a1">00060</a> <a class="code" href="group__parser.html#a1">fsdp_parse</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *text_description, <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00061 {
00062   <a class="code" href="group__common.html#a6">fsdp_error_t</a> result;
00063   <span class="keyword">const</span> <span class="keywordtype">char</span> *p = text_description, *p2;
00064   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, j;
00065   <span class="comment">/* temps for sscanf */</span>
00066   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TEMPCHARS = 6;
00067   <span class="keywordtype">char</span> fsdp_buf[TEMPCHARS][<a class="code" href="parserpriv_8h.html#a0">MAXSHORTFIELDLEN</a>];
00068   <span class="keywordtype">char</span> longfsdp_buf[<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>];
00069   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TEMPINTS = 2;
00070   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> wuint[TEMPINTS];
00071 
00072   <span class="keywordflow">if</span> ( (NULL == text_description) || (NULL == dsc) )
00073     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a32">FSDPE_INVALID_PARAMETER</a>;
00074 
00075   <span class="comment">/***************************************************************************/</span>
00076   <span class="comment">/* A) parse session-level description                                      */</span>
00077   <span class="comment">/***************************************************************************/</span>
00078   
00079   <span class="comment">/* `v=' line (protocol version) */</span>
00080   <span class="comment">/* according to the RFC, only `v=0' is valid */</span>
00081   <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"v=%1lu"</span>,&amp;wuint[0]) ){
00082     <span class="keywordflow">if</span> ( wuint[0] != 0 )
00083       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a7">FSDPE_INVALID_VERSION</a>;
00084   } <span class="keywordflow">else</span> {
00085     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a6">FSDPE_MISSING_VERSION</a>;
00086   }
00087   <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00088 
00089   <span class="comment">/* `o=' line (owner/creator and session identifier) */</span>
00090   <span class="comment">/* o=&lt;username&gt; &lt;session id&gt; &lt;version&gt; &lt;network type&gt; &lt;address type&gt;</span>
00091 <span class="comment">     &lt;address&gt; */</span>
00092   <span class="keywordflow">if</span> ( !strncmp(p,<span class="stringliteral">"o="</span>,2) ) {
00093     p += 2;
00094     <span class="comment">/* note that the following max lengths may vary in the future and</span>
00095 <span class="comment">       are quite arbitary */</span>
00096     <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"%"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"[\x21-\xFF] %"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"[0-9] %"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"[0-9] %2s %3s %"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"s"</span>,
00097           fsdp_buf[0],fsdp_buf[1],fsdp_buf[2],fsdp_buf[3],fsdp_buf[4],fsdp_buf[5]) != 6)
00098       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a9">FSDPE_INVALID_OWNER</a>;
00099     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o1">o_username</a> = strdup(fsdp_buf[0]);
00100     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o2">o_session_id</a> = strdup(fsdp_buf[1]);
00101     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o3">o_announcement_version</a> = strdup(fsdp_buf[2]);
00102     <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[3],<span class="stringliteral">"IN"</span>,2) ) {
00103       dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o4">o_network_type</a> = <a class="code" href="group__common.html#a7a35">FSDP_NETWORK_TYPE_INET</a>;
00104       <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[4],<span class="stringliteral">"IP4"</span>,3) )
00105      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o5">o_address_type</a> = <a class="code" href="group__common.html#a8a37">FSDP_ADDRESS_TYPE_IPV4</a>;
00106       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[4],<span class="stringliteral">"IP6"</span>,3) )
00107      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o5">o_address_type</a> = <a class="code" href="group__common.html#a8a38">FSDP_ADDRESS_TYPE_IPV6</a>;
00108       <span class="keywordflow">else</span>
00109      <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a9">FSDPE_INVALID_OWNER</a>;  
00110     } <span class="keywordflow">else</span> {
00111       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a9">FSDPE_INVALID_OWNER</a>;
00112     }
00113     <span class="comment">/* TODO? check valid unicast address/FQDN */</span>
00114     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o6">o_address</a> = strdup(fsdp_buf[5]);
00115   } <span class="keywordflow">else</span> {
00116     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a8">FSDPE_MISSING_OWNER</a>;
00117   }
00118   <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00119   
00120   <span class="comment">/* `s=' line (session name) -note that the name string cannot be empty */</span>
00121   <span class="comment">/* s=&lt;session name&gt; */</span>
00122   <span class="keywordflow">if</span> ( !strncmp(p,<span class="stringliteral">"s="</span>,2) ) {
00123     <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"s=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf) &lt; 1 )
00124       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a11">FSDPE_EMPTY_NAME</a>;
00125     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o7">s_name</a> = strdup(longfsdp_buf);
00126   } <span class="keywordflow">else</span> {
00127     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a10">FSDPE_MISSING_NAME</a>;
00128   }
00129   <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00130   
00131   <span class="comment">/* `i=' line (session information) [optional] */</span>
00132   <span class="comment">/* i=&lt;session description&gt; */</span>
00133   <span class="keywordflow">if</span> ( !strncmp(p,<span class="stringliteral">"i="</span>,2) &amp;&amp; sscanf(p,<span class="stringliteral">"i=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf) ) {
00134     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o8">i_information</a> = strdup(longfsdp_buf);
00135     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00136   } <span class="keywordflow">else</span> {
00137     <span class="comment">/* (optional) information absent */</span>
00138   }
00139   
00140   <span class="comment">/* `u=' line (URI of description)  [optional] */</span>
00141   <span class="comment">/* u=&lt;URI&gt; */</span>
00142   <span class="keywordflow">if</span> ( !strncmp(p,<span class="stringliteral">"u="</span>,2) &amp;&amp; sscanf(p,<span class="stringliteral">"u=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf) ) {
00143     <span class="comment">/* TODO? check valid uri */</span>
00144     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o9">u_uri</a> = strdup(longfsdp_buf);
00145     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00146   } <span class="keywordflow">else</span> {
00147     <span class="comment">/* (optional) uri absent */</span>
00148   }
00149        
00150   <span class="comment">/* `e=' lines (email address) [zero or more] */</span>
00151   <span class="comment">/* e=&lt;email address&gt; */</span>
00152   p2 = p;
00153   j = 0;
00154   <span class="keywordflow">while</span> ( !strncmp(p2,<span class="stringliteral">"e="</span>,2) ) {
00155     <span class="comment">/* First, count how many emails are there */</span>
00156     j++;
00157     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00158   }
00159   dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o11">emails_count</a> = j;
00160   <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o11">emails_count</a> &gt; 0 ) {
00161     <span class="comment">/* Then, build the array of emails */</span>
00162     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o10">emails</a> = calloc(j,<span class="keyword">sizeof</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *));
00163     <span class="keywordflow">for</span> ( j = 0; j &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o11">emails_count</a>; j++) {
00164       sscanf(p,<span class="stringliteral">"e=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf);
00165       <span class="comment">/* TODO? check valid email-address. */</span>
00166       dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o10">emails</a>[j] = strdup(longfsdp_buf);
00167       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00168     }
00169   }
00170 
00171   <span class="comment">/* `p=' lines (phone number) [zero or more] */</span>
00172   <span class="comment">/*  p=&lt;phone number&gt; */</span>
00173   j = 0;
00174   <span class="comment">/* assert ( p2 == p ); */</span>
00175   <span class="keywordflow">while</span> ( !strncmp(p2,<span class="stringliteral">"p="</span>,2) ) {
00176     j++;
00177     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00178   }
00179   dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o13">phones_count</a> = j;
00180   <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o13">phones_count</a> &gt; 0 ) {
00181     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o12">phones</a> = calloc(j,<span class="keyword">sizeof</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *));
00182     <span class="keywordflow">for</span> ( j = 0; j &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o13">phones_count</a>; j++ ) {
00183       sscanf(p,<span class="stringliteral">"p=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf);
00184       <span class="comment">/* TODO? check valid phone-number. */</span>
00185       dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o12">phones</a>[j] = strdup(longfsdp_buf);
00186       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00187     }
00188   }
00189   
00190   <span class="comment">/* `c=' line (connection information - not required if included in all media) [optional] */</span>
00191   <span class="comment">/* c=&lt;network type&gt; &lt;address type&gt; &lt;connection address&gt; */</span>
00192   result = <a class="code" href="parserpriv_8h.html#a4">fsdp_parse_c</a>(&amp;p,&amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o14">c_network_type</a>),&amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o15">c_address_type</a>),
00193                &amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o16">c_address</a>));
00194   <span class="keywordflow">if</span> ( <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> != result )
00195     <span class="keywordflow">return</span> result;
00196   
00197   <span class="comment">/* `b=' lines (bandwidth information) [optional] */</span>
00198   <span class="comment">/* b=&lt;modifier&gt;:&lt;bandwidth-value&gt; */</span>
00199   result = <a class="code" href="parserpriv_8h.html#a5">fsdp_parse_b</a>(&amp;p,&amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o17">bw_modifiers</a>),&amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o18">bw_modifiers_count</a>));
00200   <span class="keywordflow">if</span> ( <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> != result ) 
00201     <span class="keywordflow">return</span> result;
00202     
00203   <span class="comment">/* A.1) Time descriptions: */</span>
00204   
00205   <span class="comment">/* `t=' lines (time the session is active) [1 or more] */</span>
00206   <span class="comment">/* t=&lt;start time&gt;  &lt;stop time&gt; */</span>
00207   j = 0;
00208   p2 = p;
00209   <span class="keywordflow">while</span> ( !strncmp(p2,<span class="stringliteral">"t="</span>,2) ) {
00210     j++;
00211     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00212     <span class="keywordflow">while</span> ( !strncmp(p2,<span class="stringliteral">"r="</span>,2) )
00213       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00214   }
00215   dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a> = j;
00216   <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a> == 0 )
00217     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a16">FSDPE_MISSING_TIME</a>;
00218   dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a> = calloc(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>,
00219                     <span class="keyword">sizeof</span>(<a class="code" href="structfsdp__time__period__t.html">fsdp_time_period_t</a>*));
00220   index = 0;
00221   <span class="keywordflow">for</span> ( j = 0; j &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>; j++ ) { 
00222     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> h = 0;
00223     <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"t=%10lu %10lu"</span>,&amp;wuint[0],&amp;wuint[1]) != 2 ) {
00224       <span class="comment">/* not all periods have been successfully parsed */</span>
00225       dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a> = j;
00226       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a17">FSDPE_INVALID_TIME</a>;
00227     }
00228     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j] = calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__time__period__t.html">fsdp_time_period_t</a>));
00229 
00230     <span class="comment">/* convert from NTP to time_t time */</span>
00231     <span class="keywordflow">if</span> (wuint[0] != 0)
00232       wuint[0] -= <a class="code" href="priv_8h.html#a1">NTP_EPOCH_OFFSET</a>;
00233     <span class="keywordflow">if</span> (wuint[1] != 0)
00234       wuint[1] -= <a class="code" href="priv_8h.html#a1">NTP_EPOCH_OFFSET</a>;
00235     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o0">start</a> = wuint[0];
00236     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o1">stop</a> = wuint[1];
00237     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00238     
00239     <span class="comment">/* `r' lines [zero or more repeat times for each t=] */</span>
00240     <span class="comment">/*r=&lt;repeat interval&gt; &lt;active duration&gt; &lt;list of offsets from</span>
00241 <span class="comment">      start-time&gt;*/</span>
00242     p2 = p;
00243     <span class="keywordflow">while</span> ( !strncmp(p2,<span class="stringliteral">"r="</span>,2) ) {
00244       h++;
00245       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00246     }
00247     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o3">repeats_count</a> = h;
00248     <span class="keywordflow">if</span> ( h &gt; 0 ) { 
00249       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index2 = 0;
00250       dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o2">repeats</a> = calloc(h,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__repeat__t.html">fsdp_repeat_t</a>*));
00251       <span class="keywordflow">for</span> ( h = 0; h &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o3">repeats_count</a>; h++ ) {
00252      <span class="comment">/*</span>
00253 <span class="comment">       get_repeat_values(p,&amp;(dsc-&gt;time_periods[index].repeats[index2]));</span>
00254 <span class="comment">       fsdp_error_t get_repeat_values (const char *r, fsdp_repeat_t</span>
00255 <span class="comment">       *repeat);</span>
00256 <span class="comment">       */</span>
00257      <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"r=%10s %10s %"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,
00258               fsdp_buf[0],fsdp_buf[1],longfsdp_buf) == 3 ) {
00259        <a class="code" href="structfsdp__repeat__t.html">fsdp_repeat_t</a> *repeat;
00260        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o2">repeats</a>[h] = calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__repeat__t.html">fsdp_repeat_t</a>));
00261        repeat = dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o2">repeats</a>[h];
00262        <span class="comment">/* get interval, duration and list of offsets */</span>
00263        result = <a class="code" href="parserpriv_8h.html#a7">fsdp_repeat_time_to_uint</a>(fsdp_buf[0],&amp;(repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o0">interval</a>));
00264        <span class="keywordflow">if</span> ( result == <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> ) {
00265          result = <a class="code" href="parserpriv_8h.html#a7">fsdp_repeat_time_to_uint</a>(fsdp_buf[1],&amp;(repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o1">duration</a>));
00266          <span class="keywordflow">if</span> ( result == <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> ) {
00267            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 1;
00268            <span class="keyword">const</span> <span class="keywordtype">char</span> *i = longfsdp_buf;
00269            <span class="keywordflow">while</span> ( NULL != (i = strchr(i,<span class="charliteral">' '</span>)) ) {
00270           k++;
00271           <span class="keywordflow">if</span> ( NULL != i )
00272             i++;
00273            }
00274            repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o3">offsets_count</a> = k;
00275            repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o2">offsets</a> = calloc(k,<span class="keyword">sizeof</span>(time_t));
00276            i = longfsdp_buf;
00277            <span class="keywordflow">for</span> ( k = 0; 
00278               (k &lt; repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o3">offsets_count</a>) &amp;&amp; (result == <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>);
00279               k++ ) {
00280           result = <a class="code" href="parserpriv_8h.html#a7">fsdp_repeat_time_to_uint</a>(i,&amp;(repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o2">offsets</a>[k])); 
00281           i = strchr(i,<span class="charliteral">' '</span>);
00282           <span class="keywordflow">if</span> ( NULL != i)
00283             i++;
00284            }
00285            <span class="keywordflow">if</span> ( k &lt; repeat-&gt;<a class="code" href="structfsdp__repeat__t.html#o3">offsets_count</a> ) {
00286           <span class="comment">/* there where invalid repeat offsets */</span>
00287           dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o3">repeats_count</a> = k;
00288           <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a18">FSDPE_INVALID_REPEAT</a>;
00289            }         
00290          }
00291        }
00292        <span class="keywordflow">if</span> ( result != <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> ) {
00293          <span class="comment">/* not all repeats have been succesfully parsed */</span>
00294          dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o3">repeats_count</a> = h;
00295          <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a18">FSDPE_INVALID_REPEAT</a>;
00296        }      
00297        <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00298      } <span class="keywordflow">else</span> {
00299        <span class="comment">/* not all repeats have been succesfully parsed */</span>
00300        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[j]-&gt;<a class="code" href="structfsdp__time__period__t.html#o3">repeats_count</a> = h;
00301        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a18">FSDPE_INVALID_REPEAT</a>;
00302      }
00303      index2++;
00304       }
00305     }
00306   }
00307   
00308   <span class="comment">/* `z=' line (time zone adjustments) [zero or more] */</span>
00309   <span class="comment">/* z=&lt;adjustment time&gt; &lt;offset&gt; &lt;adjustment time&gt; &lt;offset&gt; .... */</span>
00310   <span class="keywordflow">if</span> ( !strncmp(p,<span class="stringliteral">"z="</span>,2) ) {
00311     <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"z=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf) ) {
00312       <span class="comment">/* TODO: guess how many pairs are there and process them */</span>
00313       dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o21">timezone_adj</a> = strdup(longfsdp_buf);
00314       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00315     } <span class="keywordflow">else</span> {
00316       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a19">FSDPE_INVALID_TIMEZONE</a>;
00317     }
00318   }
00319 
00320   <span class="comment">/* `k=' line (encryption key) [optional] */</span>
00321   <span class="comment">/* k=&lt;method&gt; </span>
00322 <span class="comment">     k=&lt;method&gt;:&lt;encryption key&gt; */</span>
00323   result = <a class="code" href="parserpriv_8h.html#a6">fsdp_parse_k</a>(&amp;p,&amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o22">k_encryption_method</a>),
00324                &amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o23">k_encryption_content</a>));
00325   <span class="keywordflow">if</span> ( result != <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> )
00326     <span class="keywordflow">return</span> result;
00327   
00328   <span class="comment">/* A.2) Attributes */</span>
00329   <span class="comment">/* `a=' lines (session attribute) [0 or more] */</span>
00330   <span class="comment">/* a=&lt;attribute&gt;</span>
00331 <span class="comment">     a=&lt;attribute&gt;:&lt;value&gt; */</span>
00332   <span class="keywordflow">while</span> ( !strncmp(p,<span class="stringliteral">"a="</span>,2) ) {
00333     <span class="comment">/* The "9" lenght specifier of the first string is subject to</span>
00334 <span class="comment">       changes */</span>
00335     <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"a=%9[^:\r\n]:%"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"[^\r\n]"</span>,fsdp_buf[0],fsdp_buf[1]) == 2 ) {  
00336       <span class="comment">/* session-level value attributes */</span>
00337       <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"cat"</span>,3) )
00338      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o24">a_str_attributes</a>[<a class="code" href="group__common.html#a16a80">FSDP_SESSION_STR_ATT_CATEGORY</a>] = 
00339        strdup(fsdp_buf[1]);
00340       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"keywds"</span>,6) )
00341      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o24">a_str_attributes</a>[<a class="code" href="group__common.html#a16a81">FSDP_SESSION_STR_ATT_KEYWORDS</a>] =
00342        strdup(fsdp_buf[1]);
00343       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"tool"</span>,4) )
00344      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o24">a_str_attributes</a>[<a class="code" href="group__common.html#a16a82">FSDP_SESSION_STR_ATT_TOOL</a>] =
00345        strdup(fsdp_buf[1]);
00346       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"rtpmap"</span>,6) )
00347      <a class="code" href="parserpriv_8h.html#a8">fsdp_parse_rtpmap</a>(&amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o25">a_rtpmaps</a>),
00348                 &amp;(dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>),fsdp_buf[1]);
00349       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"type"</span>,4) ) {
00350      <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"broadcast"</span>,9) )
00351        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o28">a_type</a> = <a class="code" href="group__common.html#a13a60">FSDP_SESSION_TYPE_BROADCAST</a>;
00352      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"meeting"</span>,7) )
00353        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o28">a_type</a> = <a class="code" href="group__common.html#a13a61">FSDP_SESSION_TYPE_MEETING</a>;
00354      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"moderated"</span>,9) )
00355        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o28">a_type</a> = <a class="code" href="group__common.html#a13a62">FSDP_SESSION_TYPE_MODERATED</a>;
00356      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"test"</span>,4) )
00357        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o28">a_type</a> = <a class="code" href="group__common.html#a13a63">FSDP_SESSION_TYPE_TEST</a>;
00358      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"H332"</span>,4) )
00359        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o28">a_type</a> = <a class="code" href="group__common.html#a13a64">FSDP_SESSION_TYPE_H332</a>;
00360      <span class="keywordflow">else</span>
00361        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a23">FSDPE_INVALID_SESSION_TYPE</a>;
00362       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"charset"</span>,7) )
00363      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o24">a_str_attributes</a>[<a class="code" href="group__common.html#a16a83">FSDP_SESSION_STR_ATT_CHARSET</a>] =
00364        strdup(fsdp_buf[1]);
00365       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"sdplang"</span>,7) ) {
00366      <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o29">a_sdplangs</a> ) {
00367        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a> = 0;
00368        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o29">a_sdplangs</a> = calloc(<a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00369      }
00370      <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a> &lt; <a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a> ) {
00371        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o29">a_sdplangs</a>[dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a>] = strdup(fsdp_buf[1]);
00372        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a>++;
00373      }
00374       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"lang"</span>,4) ) {
00375      <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o31">a_langs</a> ) {
00376        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a> = 0;
00377        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o31">a_langs</a> = calloc(<a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00378      }
00379      <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a> &lt; <a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a> ) {
00380        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o31">a_langs</a>[dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a>] = strdup(fsdp_buf[1]);
00381        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a>++;
00382      }
00383       }  <span class="keywordflow">else</span> {
00384      <span class="comment">/* ignore unknown attributes, but provide access to them */</span>     
00385      *longfsdp_buf = <span class="charliteral">'\0'</span>;
00386      strncat(longfsdp_buf,fsdp_buf[0],<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00387      strncat(longfsdp_buf,<span class="stringliteral">":"</span>,<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00388      strncat(longfsdp_buf,fsdp_buf[1],<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00389      <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a> ) {
00390        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a> = 0;
00391        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a> = 
00392          calloc(<a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00393      }
00394      <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a> &lt; 
00395           <a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a> ) {
00396        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a>
00397          [dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a>] = strdup(longfsdp_buf);
00398        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a>++;
00399      }
00400       }
00401       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);  
00402     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"a=%20s"</span>,fsdp_buf[0]) == 1 ) {  
00403       <span class="comment">/* session-level property attributes */</span>
00404       <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"recvonly"</span>,8) )
00405      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o27">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a52">FSDP_SENDRECV_RECVONLY</a>;
00406       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"sendonly"</span>,8) )
00407      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o27">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a53">FSDP_SENDRECV_SENDONLY</a>;
00408       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"inactive"</span>,8) )
00409      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o27">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a54">FSDP_SENDRECV_INACTIVE</a>;
00410       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"sendrecv"</span>,8) )
00411      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o27">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a51">FSDP_SENDRECV_SENDRECV</a>;
00412       <span class="keywordflow">else</span> {
00413      <span class="comment">/* ignore unknown attributes, but provide access to them */</span>     
00414      *longfsdp_buf = <span class="charliteral">'\0'</span>;
00415      strncat(longfsdp_buf,fsdp_buf[0],<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00416      <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a> ) {
00417        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a> = 0;
00418        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a> = 
00419          calloc(<a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00420      }
00421      <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a> &lt; 
00422           <a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a> ) {
00423        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a>
00424          [dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a>] = strdup(longfsdp_buf);
00425        dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a>++;
00426      }
00427       }
00428       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00429     } <span class="keywordflow">else</span>
00430       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a21">FSDPE_INVALID_ATTRIBUTE</a>;
00431   }
00432   
00433   <span class="comment">/***************************************************************************/</span>
00434   <span class="comment">/* B) parse media-level descriptions                                       */</span>
00435   <span class="comment">/***************************************************************************/</span>
00436   p2 = p;
00437   j = 0;
00438   <span class="keywordflow">while</span> ( (*p2 != <span class="charliteral">'\0'</span>) &amp;&amp; !strncmp(p2,<span class="stringliteral">"m="</span>,2) ) {
00439     <span class="keywordtype">char</span> c;
00440     j++;
00441     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00442     <span class="keywordflow">while</span> ( sscanf(p2,<span class="stringliteral">"%c="</span>,&amp;c) == 1 ) {
00443       <span class="keywordflow">if</span> ( c == <span class="charliteral">'i'</span> || c == <span class="charliteral">'c'</span> || c == <span class="charliteral">'b'</span> || c == <span class="charliteral">'k'</span> || c == <span class="charliteral">'a'</span> ) {
00444      <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p2);
00445       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( c == <span class="charliteral">'m'</span> ) {
00446      <span class="keywordflow">break</span>;
00447       } <span class="keywordflow">else</span> {
00448      <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a28">FSDPE_INVALID_LINE</a>;
00449       }
00450     }
00451   }
00452   dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o34">media_announcements_count</a> = j;
00453   <span class="keywordflow">if</span> ( dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o34">media_announcements_count</a> == 0 ) {
00454     ;
00455     <span class="comment">/*return FSDPE_MISSING_MEDIA;*/</span>
00456   } <span class="keywordflow">else</span> {  <span class="comment">/* dsc-&gt;media_announcements_count &gt; 0 */</span>
00457     dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o33">media_announcements</a> = calloc(j,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_announcement_t</a>*));
00458     <span class="keywordflow">for</span> ( j = 0; j &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o34">media_announcements_count</a>; j++ ) {
00459       <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_announcement_t</a> *media = NULL;
00460       <span class="comment">/* `m=' line (media name, transport address and format list) */</span>
00461       <span class="comment">/* m=&lt;media&gt;  &lt;port&gt;  &lt;transport&gt; &lt;fmt list&gt; */</span>
00462       <span class="comment">/* The max. string lengths are subject to change */</span>
00463       <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"m=%11s %8s %7s %"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,
00464             fsdp_buf[0],fsdp_buf[1],fsdp_buf[2],longfsdp_buf) != 4 ) {
00465      <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a24">FSDPE_INVALID_MEDIA</a>;
00466       } <span class="keywordflow">else</span> {
00467      dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o33">media_announcements</a>[j] = 
00468        calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_announcement_t</a>));
00469      media = dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o33">media_announcements</a>[j];
00470      <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"audio"</span>,5) )
00471        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a> = <a class="code" href="group__common.html#a14a66">FSDP_MEDIA_AUDIO</a>;
00472      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"video"</span>,5) )
00473        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a> = <a class="code" href="group__common.html#a14a67">FSDP_MEDIA_VIDEO</a>;
00474      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"text"</span>,4) )
00475        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a> = <a class="code" href="group__common.html#a14a68">FSDP_MEDIA_TEXT</a>;
00476      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"application"</span>,11) )
00477        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a> = <a class="code" href="group__common.html#a14a69">FSDP_MEDIA_APPLICATION</a>;
00478      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"data"</span>,4) )
00479        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a> = <a class="code" href="group__common.html#a14a70">FSDP_MEDIA_DATA</a>;
00480      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"control"</span>,7) )
00481        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a> = <a class="code" href="group__common.html#a14a71">FSDP_MEDIA_CONTROL</a>;
00482      <span class="keywordflow">else</span>
00483        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a25">FSDPE_UNKNOWN_MEDIA_TYPE</a>;
00484      { <span class="comment">/* try to get port specification as port/number */</span>
00485        <span class="keywordtype">char</span> *slash;
00486        <span class="keywordflow">if</span> ( (slash = strchr(fsdp_buf[1],<span class="charliteral">'/'</span>)) ) {
00487          *slash = <span class="charliteral">'\0'</span>;
00488          slash++;
00489          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o1">port</a> = strtol(fsdp_buf[1],NULL,10);
00490          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o2">port_count</a> = strtol(slash,NULL,10);
00491        } <span class="keywordflow">else</span> {
00492          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o1">port</a> = strtol(fsdp_buf[1],NULL,10);
00493          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o2">port_count</a> = 0;
00494        }
00495      }
00496      <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[2],<span class="stringliteral">"RTP/AVP"</span>,7) )
00497        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a> = <a class="code" href="group__common.html#a15a73">FSDP_TP_RTP_AVP</a>;
00498      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[2],<span class="stringliteral">"udp"</span>,3) )
00499        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a> = <a class="code" href="group__common.html#a15a74">FSDP_TP_UDP</a>;
00500      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[2],<span class="stringliteral">"TCP"</span>,3) )
00501        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a> = <a class="code" href="group__common.html#a15a75">FSDP_TP_TCP</a>;
00502      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[2],<span class="stringliteral">"UDPTL"</span>,5) )
00503        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a> = <a class="code" href="group__common.html#a15a76">FSDP_TP_UDPTL</a>;
00504      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[2],<span class="stringliteral">"vat"</span>,3) )
00505        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a> = <a class="code" href="group__common.html#a15a77">FSDP_TP_VAT</a>;
00506      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[2],<span class="stringliteral">"rtp"</span>,3) )
00507        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a> = <a class="code" href="group__common.html#a15a78">FSDP_TP_OLD_RTP</a>;
00508      <span class="keywordflow">else</span>
00509        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a26">FSDPE_UNKNOWN_MEDIA_TRANSPORT</a>;
00510      {
00511        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k = 0;
00512        <span class="keywordtype">char</span> *s = longfsdp_buf;
00513        <span class="keywordflow">while</span> ( NULL != ( s = strchr(s,<span class="charliteral">' '</span>)) ) {
00514          k++;
00515          <span class="keywordflow">if</span> ( NULL != s )
00516            s++;
00517        }
00518        k++; <span class="comment">/* when there is no space left, count the last format */</span>
00519        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o5">formats_count</a> = k;
00520        media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o4">formats</a> = calloc(k,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00521        s = longfsdp_buf;
00522        <span class="keywordflow">for</span> ( k = 0; k &lt; media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o5">formats_count</a>; k++ ) {
00523          <span class="keywordtype">char</span> *space = strchr(s,<span class="charliteral">' '</span>);
00524          <span class="keywordflow">if</span> ( NULL != space )
00525            *space = <span class="charliteral">'\0'</span>;
00526          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o4">formats</a>[k] = strdup(s);
00527          s = space + 1;
00528        }
00529      }
00530      <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00531       }
00532       
00533       <span class="comment">/* `i=' line (media title) [optional] */</span>
00534       <span class="comment">/* i=&lt;media title&gt; */</span>
00535       <span class="keywordflow">if</span> ( !strncmp(p,<span class="stringliteral">"i="</span>,2)  &amp;&amp; sscanf(p,<span class="stringliteral">"i=%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,longfsdp_buf) ) {
00536      media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o6">i_title</a> = strdup(longfsdp_buf);
00537      <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00538       } <span class="keywordflow">else</span> {
00539      <span class="comment">/* (optional) information absent */</span>
00540       }
00541       
00542       <span class="comment">/* `c=' line (connection information - overrides session-level</span>
00543 <span class="comment">      line) [optional if provided at session-level] */</span>
00544       <span class="comment">/* c=&lt;network type&gt; &lt;address type&gt; &lt;connection address&gt; */</span>    
00545       result = <a class="code" href="parserpriv_8h.html#a4">fsdp_parse_c</a>(&amp;p,&amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o7">c_network_type</a>),
00546                    &amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o8">c_address_type</a>),&amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o9">c_address</a>));
00547       <span class="keywordflow">if</span> ( result != <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> )
00548      <span class="keywordflow">return</span> result;
00549       
00550       <span class="comment">/* `b=' lines (bandwidth information) [optional] */</span>
00551       <span class="comment">/* b=&lt;modifier&gt;:&lt;bandwidth-value&gt; */</span>
00552       result = <a class="code" href="parserpriv_8h.html#a5">fsdp_parse_b</a>(&amp;p,&amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o10">bw_modifiers</a>),
00553                    &amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o11">bw_modifiers_count</a>));
00554       <span class="keywordflow">if</span> ( <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> != result )
00555      <span class="keywordflow">return</span> result;
00556 
00557       <span class="comment">/* `k=' line (encryption key) [optional] */</span>
00558       <span class="comment">/* k=&lt;method&gt; </span>
00559 <span class="comment">      k=&lt;method&gt;:&lt;encryption key&gt; */</span>
00560       result = <a class="code" href="parserpriv_8h.html#a6">fsdp_parse_k</a>(&amp;p,&amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o12">k_encryption_method</a>),
00561                    &amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o13">k_encryption_content</a>)); 
00562       <span class="keywordflow">if</span> ( result != <a class="code" href="group__common.html#a6a4">FSDPE_OK</a> )
00563      <span class="keywordflow">return</span> result;
00564       
00565       <span class="comment">/* B.1) Attributes */</span>
00566       
00567       <span class="comment">/* `a=' lines (zero or more media attribute lines) [optional] */</span>
00568       <span class="comment">/* a=&lt;attribute&gt;</span>
00569 <span class="comment">      a=&lt;attribute&gt;:&lt;value&gt; */</span>
00570       <span class="keywordflow">while</span> ( !strncmp(p,<span class="stringliteral">"a="</span>,2) ) {
00571      <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"a=%9[^:\r\n]:%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"[^\r\n]"</span>,fsdp_buf[0],longfsdp_buf) 
00572           == 2 ) {  
00573        <span class="comment">/* media-level value attributes */</span>
00574        <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"ptime"</span>,5) )
00575          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o14">a_ptime</a> = strtoul(longfsdp_buf,NULL,10);
00576        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"maxptime"</span>,8) )
00577          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o15">a_maxptime</a> = strtoul(longfsdp_buf,NULL,10);
00578        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"rtpmap"</span>,6) )
00579          <a class="code" href="parserpriv_8h.html#a8">fsdp_parse_rtpmap</a>(&amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o16">a_rtpmaps</a>),
00580                      &amp;(media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o17">a_rtpmaps_count</a>),longfsdp_buf);
00581        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"orient"</span>,6) ) {
00582          <span class="keywordflow">if</span> ( !strncmp(longfsdp_buf,<span class="stringliteral">"portrait"</span>,8) ) 
00583            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o18">a_orient</a> = <a class="code" href="group__common.html#a12a56">FSDP_ORIENT_PORTRAIT</a>;
00584          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(longfsdp_buf,<span class="stringliteral">"landscape"</span>,9) ) 
00585            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o18">a_orient</a> = <a class="code" href="group__common.html#a12a57">FSDP_ORIENT_LANDSCAPE</a>;
00586          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(longfsdp_buf,<span class="stringliteral">"seascape"</span>,9) ) 
00587            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o18">a_orient</a> = <a class="code" href="group__common.html#a12a58">FSDP_ORIENT_SEASCAPE</a>; 
00588        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"sdplang"</span>,7) ) {
00589          <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o29">a_sdplangs</a> ) {
00590            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o21">a_sdplangs_count</a> = 0;
00591            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o20">a_sdplangs</a> = 
00592           calloc(<a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00593          }
00594          <span class="keywordflow">if</span> ( media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o21">a_sdplangs_count</a> &lt; <a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a> ) {
00595            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o20">a_sdplangs</a>[dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a>] = strdup(longfsdp_buf);
00596            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o21">a_sdplangs_count</a>++;
00597          }
00598        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"lang"</span>,4) ) {
00599          <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o31">a_langs</a> ) {
00600            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o23">a_langs_count</a> = 0;
00601            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o22">a_langs</a> = calloc(<a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00602          }
00603          <span class="keywordflow">if</span> ( media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o23">a_langs_count</a> &lt; <a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a> ) {
00604            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o22">a_langs</a>[dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a>] = strdup(longfsdp_buf);
00605            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o23">a_langs_count</a>++;
00606          }
00607        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"framerate"</span>,9) ) 
00608          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o24">a_framerate</a> = strtof(longfsdp_buf,NULL);
00609        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"fmtp"</span>,4) ) {
00610          <span class="keywordflow">if</span> ( NULL == media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o26">a_fmtps</a> ) {
00611            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o27">a_fmtps_count</a> = 0;
00612            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o26">a_fmtps</a> = calloc(<a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00613          }
00614          <span class="keywordflow">if</span> ( media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o27">a_fmtps_count</a> &lt; <a class="code" href="priv_8h.html#a4">SDPLANGS_MAX_COUNT</a> ) {
00615            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o26">a_fmtps</a>[media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o27">a_fmtps_count</a>] = strdup(longfsdp_buf);
00616            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o27">a_fmtps_count</a>++;
00617          }
00618        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"rtcp"</span>,4) ) {
00619          <span class="keywordtype">int</span> opts = 0;
00620          <span class="comment">/* rtcp attribute: a=rtcp:&lt;port&gt; &lt;nettype&gt; &lt;addrtype&gt; &lt;address&gt; */</span>
00621          opts = sscanf(longfsdp_buf,<span class="stringliteral">"%lu %2s %3s %"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"s"</span>,
00622                  &amp;wuint[0],fsdp_buf[0],fsdp_buf[1],fsdp_buf[2]);
00623          <span class="keywordflow">if</span> ( opts &gt;= 1 ) {
00624            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o28">a_rtcp_port</a> = wuint[0];
00625            <span class="keywordflow">if</span> ( opts &gt;= 2 ) {
00626           <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"IN"</span>,2) ) {
00627             media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o29">a_rtcp_network_type</a> = <a class="code" href="group__common.html#a7a35">FSDP_NETWORK_TYPE_INET</a>;
00628           } <span class="comment">/* else</span>
00629 <span class="comment">            ; TODO: define error code? */</span>
00630           <span class="keywordflow">if</span> ( opts &gt;= 3 ) {
00631             <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"IP4"</span>,3) )
00632               media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o30">a_rtcp_address_type</a> = <a class="code" href="group__common.html#a8a37">FSDP_ADDRESS_TYPE_IPV4</a>;
00633             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"IP6"</span>,3) )
00634               media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o30">a_rtcp_address_type</a> = <a class="code" href="group__common.html#a8a38">FSDP_ADDRESS_TYPE_IPV6</a>;
00635             <span class="keywordflow">else</span>
00636               <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a14">FSDPE_INVALID_CONNECTION_NETTYPE</a>; 
00637             <span class="comment">/*add specific code?*/</span>
00638             <span class="keywordflow">if</span> ( opts &gt;= 4)
00639               media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o31">a_rtcp_address</a> = strdup(fsdp_buf[2]);
00640           }
00641            }
00642          }
00643        } <span class="keywordflow">else</span> {
00644          <span class="comment">/* ignore unknown attributes, but provide access to them */</span>     
00645          *fsdp_buf[1] = <span class="charliteral">'\0'</span>;
00646          strncat(fsdp_buf[1],fsdp_buf[0],<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00647          strncat(fsdp_buf[1],<span class="stringliteral">":"</span>,<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00648          strncat(fsdp_buf[1],longfsdp_buf,<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00649          <span class="keywordflow">if</span> ( NULL == media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a> ) {
00650            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a> = 0;
00651            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a> = 
00652           calloc(<a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00653          }
00654          <span class="keywordflow">if</span> ( media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a> &lt; 
00655            <a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a> ) {
00656            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a>
00657           [media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a>] = strdup(fsdp_buf[1]);
00658            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a>++;
00659          }
00660        }
00661        <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00662      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( sscanf(p,<span class="stringliteral">"a=%8s"</span>,fsdp_buf[0]) == 1 ) {  
00663        <span class="comment">/* media-level property attributes */</span>
00664        <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"recvonly"</span>,8) )
00665          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o19">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a52">FSDP_SENDRECV_RECVONLY</a>;
00666        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"sendonly"</span>,8) )
00667          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o19">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a53">FSDP_SENDRECV_SENDONLY</a>;
00668        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"inactive"</span>,8) )
00669          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o19">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a54">FSDP_SENDRECV_INACTIVE</a>;
00670        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"sendrecv"</span>,8) )
00671          media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o19">a_sendrecv_mode</a> = <a class="code" href="group__common.html#a11a51">FSDP_SENDRECV_SENDRECV</a>;
00672        <span class="keywordflow">else</span> {
00673          <span class="comment">/* ignore unknown attributes, but provide access to them */</span>     
00674          *longfsdp_buf = <span class="charliteral">'\0'</span>;
00675          strncat(longfsdp_buf,fsdp_buf[0],<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>);
00676          <span class="keywordflow">if</span> ( NULL == media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a> ) {
00677            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a> = 0;
00678            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a> = 
00679           calloc(<a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));
00680          }
00681          <span class="keywordflow">if</span> ( media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a> &lt; 
00682            <a class="code" href="priv_8h.html#a5">UNIDENTIFIED_ATTRIBUTES_MAX_COUNT</a> ) {
00683            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a>
00684           [media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a>] = strdup(longfsdp_buf);
00685            media-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a>++;
00686          }
00687        }
00688        <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(p);
00689      } <span class="keywordflow">else</span>
00690        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a21">FSDPE_INVALID_ATTRIBUTE</a>;
00691       }
00692     } <span class="comment">/* end of for */</span>
00693   }
00694 
00695   <span class="comment">/* Check c= has been given at session level or at media level for</span>
00696 <span class="comment">     all media */</span>
00697   <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o16">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o0">address</a> ) {
00698     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c;
00699     <span class="keywordflow">for</span> ( c = 0; c &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o34">media_announcements_count</a>; c++)
00700       <span class="keywordflow">if</span> ( NULL == dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o33">media_announcements</a>[c]-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o9">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o0">address</a> )
00701      <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a29">FSDPE_MISSING_CONNECTION_INFO</a>;
00702   }
00703 
00704   <span class="comment">/* finish */</span>
00705   <span class="keywordflow">if</span> ( *p == <span class="charliteral">'\0'</span> )
00706     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>;
00707   <span class="keywordflow">else</span>
00708     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a27">FSDPE_OVERFILLED</a>;
00709 }
00710 
00711 <span class="keyword">static</span> <a class="code" href="group__common.html#a6">fsdp_error_t</a>
<a name="l00712"></a><a class="code" href="parser_8c.html#a2">00712</a> <a class="code" href="parserpriv_8h.html#a4">fsdp_parse_c</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> **p, fsdp_network_type_t *ntype, 
00713           fsdp_address_type_t *atype, <a class="code" href="structfsdp__connection__address__t__s.html">fsdp_connection_address_t</a> *address)
00714 {
00715   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> TEMPCHARS = 3;
00716   <span class="keywordtype">char</span> fsdp_buf[TEMPCHARS][<a class="code" href="parserpriv_8h.html#a0">MAXSHORTFIELDLEN</a>];
00717 
00718   <span class="keywordflow">if</span> ( !strncmp(*p,<span class="stringliteral">"c="</span>,2) ) { 
00719     <span class="keywordflow">if</span> ( sscanf(*p,<span class="stringliteral">"c=%2s %3s %"</span><a class="code" href="parserpriv_8h.html#a1">MSFLENS</a><span class="stringliteral">"s"</span>,fsdp_buf[0],fsdp_buf[1],fsdp_buf[2]) ) {
00720       <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[0],<span class="stringliteral">"IN"</span>,2) ) {
00721      *ntype = <a class="code" href="group__common.html#a7a35">FSDP_NETWORK_TYPE_INET</a>;
00722      <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"IP4"</span>,3) )
00723        *atype = <a class="code" href="group__common.html#a8a37">FSDP_ADDRESS_TYPE_IPV4</a>;
00724      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf[1],<span class="stringliteral">"IP6"</span>,3) )
00725        *atype = <a class="code" href="group__common.html#a8a38">FSDP_ADDRESS_TYPE_IPV6</a>;
00726      <span class="keywordflow">else</span>
00727        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a14">FSDPE_INVALID_CONNECTION_NETTYPE</a>;
00728       } <span class="keywordflow">else</span> {
00729      <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a13">FSDPE_INVALID_CONNECTION_ADDRTYPE</a>;
00730       }
00731       {
00732      <span class="keywordtype">char</span> *slash = strchr(fsdp_buf[2],<span class="charliteral">'/'</span>);
00733      <span class="keywordflow">if</span> ( NULL == slash ) {
00734        address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o0">address</a> = strdup(fsdp_buf[2]);
00735        address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o1">address_ttl</a> = 0;
00736        address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o2">address_count</a> = 0;
00737      } <span class="keywordflow">else</span> {
00738        <span class="comment">/* address is IP4 multicast */</span>
00739        <span class="keywordtype">char</span> *slash2;
00740        *slash = <span class="charliteral">'\0'</span>;
00741        slash++;
00742        address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o0">address</a> = strdup(fsdp_buf[2]);
00743        slash2 = strchr(slash + 1,<span class="charliteral">'/'</span>);
00744        <span class="keywordflow">if</span> ( NULL == slash2 ) {
00745          address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o1">address_ttl</a> = strtol(slash,NULL,10);
00746          address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o2">address_count</a> = 0;
00747        } <span class="keywordflow">else</span> {
00748          *slash2 = <span class="charliteral">'\0'</span>;
00749          slash2++;
00750          address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o1">address_ttl</a> = strtol(slash,NULL,10);
00751          address-&gt;<a class="code" href="structfsdp__connection__address__t__s.html#o2">address_count</a> = strtol(slash2,NULL,10);
00752        }
00753      }
00754       }
00755       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(*p);
00756     } <span class="keywordflow">else</span> {
00757       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a12">FSDPE_INVALID_CONNECTION</a>;
00758     }
00759   }
00760   <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>;
00761 }
00762     
00763 <span class="keyword">static</span> <a class="code" href="group__common.html#a6">fsdp_error_t</a>
<a name="l00764"></a><a class="code" href="parser_8c.html#a3">00764</a> <a class="code" href="parserpriv_8h.html#a5">fsdp_parse_b</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> **p, <a class="code" href="structfsdp__bw__modifier__t.html">fsdp_bw_modifier_t</a> **bw_modifiers, 
00765           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *bw_modifiers_count)
00766 {
00767   <span class="keywordtype">char</span> fsdp_buf[<a class="code" href="parserpriv_8h.html#a0">MAXSHORTFIELDLEN</a>];
00768   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> wuint;
00769   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;
00770   <span class="keywordtype">char</span> *lp = (<span class="keywordtype">char</span>*)*p;
00771 
00772   <span class="comment">/* count b= lines */</span>
00773   <span class="keywordflow">while</span> ( !strncmp(lp,<span class="stringliteral">"b="</span>,2) ) {
00774     <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(lp);
00775     i++;
00776   }
00777   *bw_modifiers = calloc(i,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__bw__modifier__t.html">fsdp_bw_modifier_t</a>));
00778   *bw_modifiers_count = i;
00779 
00780   <span class="keywordflow">while</span> ( i &gt; 0 ) {
00781     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = *bw_modifiers_count - i;
00782     <span class="keywordflow">if</span> ( 2 == sscanf(*p,<span class="stringliteral">"b=%20[^:\r\n]:%lu"</span>,fsdp_buf,&amp;wuint) ) {
00783       <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"CT"</span>,2) )
00784      (*bw_modifiers)[index].b_mod_type = <a class="code" href="group__common.html#a9a41">FSDP_BW_MOD_TYPE_CONFERENCE_TOTAL</a>;
00785       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"AS"</span>,2) )
00786      (*bw_modifiers)[index].b_mod_type = <a class="code" href="group__common.html#a9a42">FSDP_BW_MOD_TYPE_APPLICATION_SPECIFIC</a>;
00787       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"RS"</span>,2) )
00788      (*bw_modifiers)[index].b_mod_type = <a class="code" href="group__common.html#a9a43">FSDP_BW_MOD_TYPE_RTCP_SENDERS</a>;
00789       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"RR"</span>,2) )
00790      (*bw_modifiers)[index].b_mod_type = <a class="code" href="group__common.html#a9a44">FSDP_BW_MOD_TYPE_RTCP_RECEIVERS</a>;
00791       <span class="keywordflow">else</span> {
00792      (*bw_modifiers)[index].b_mod_type = <a class="code" href="group__common.html#a9a40">FSDP_BW_MOD_TYPE_UNKNOWN</a>;
00793      (*bw_modifiers)[index].b_unknown_bw_modt = (<span class="keywordtype">char</span> *)strdup(fsdp_buf);
00794       }
00795       (*bw_modifiers)[index].b_value = wuint;
00796       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(*p);
00797     } <span class="keywordflow">else</span> {
00798       *bw_modifiers_count -= i;
00799       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a15">FSDPE_INVALID_BANDWIDTH</a>;
00800     } 
00801     i--;
00802   }
00803   <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>;
00804 }
00805 
00806 <span class="keyword">static</span> <a class="code" href="group__common.html#a6">fsdp_error_t</a>
<a name="l00807"></a><a class="code" href="parser_8c.html#a4">00807</a> <a class="code" href="parserpriv_8h.html#a6">fsdp_parse_k</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> **p, fsdp_encryption_method_t *method, <span class="keywordtype">char</span> **content)
00808 {
00809   <span class="keywordtype">char</span> fsdp_buf[<a class="code" href="parserpriv_8h.html#a0">MAXSHORTFIELDLEN</a>];
00810   <span class="keywordtype">char</span> longfsdp_buf[<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>];
00811 
00812   <span class="keywordflow">if</span> ( !strncmp(*p,<span class="stringliteral">"k="</span>,2) ) {
00813     <span class="keywordflow">if</span> ( sscanf(*p,<span class="stringliteral">"k=prompt"</span>) ) {
00814       *method = <a class="code" href="group__common.html#a10a49">FSDP_ENCRYPTION_METHOD_PROMPT</a>;
00815       *content = NULL;
00816       <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(*p);
00817     } <span class="keywordflow">else</span> {
00818       <span class="keywordflow">if</span> ( sscanf(*p,<span class="stringliteral">"k=%6[^:\r\n]:%"</span><a class="code" href="parserpriv_8h.html#a3">MLFLENS</a><span class="stringliteral">"s"</span>,fsdp_buf,longfsdp_buf) ) {
00819      <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"clear"</span>,5) )
00820        *method = <a class="code" href="group__common.html#a10a46">FSDP_ENCRYPTION_METHOD_CLEAR</a>;
00821      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"base64"</span>,6) )
00822        *method = <a class="code" href="group__common.html#a10a47">FSDP_ENCRYPTION_METHOD_BASE64</a>;   
00823      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !strncmp(fsdp_buf,<span class="stringliteral">"uri"</span>,3) )
00824        *method = <a class="code" href="group__common.html#a10a48">FSDP_ENCRYPTION_METHOD_URI</a>; 
00825      <span class="keywordflow">else</span>
00826        <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a20">FSDPE_INVALID_ENCRYPTION_METHOD</a>;
00827      *content = strdup(longfsdp_buf);
00828      <a class="code" href="parser_8c.html#a0">NEXT_LINE</a>(*p);
00829       }
00830     }
00831   }
00832   <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>;
00833 }
00834 
00835 <span class="keyword">static</span> <a class="code" href="group__common.html#a6">fsdp_error_t</a>
<a name="l00836"></a><a class="code" href="parser_8c.html#a5">00836</a> <a class="code" href="parserpriv_8h.html#a8">fsdp_parse_rtpmap</a>(<a class="code" href="structfsdp__rtpmap__t.html">fsdp_rtpmap_t</a> ***rtpmap, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *counter, 
00837             <span class="keyword">const</span> <span class="keywordtype">char</span> *value)
00838 {
00839   <a class="code" href="group__common.html#a6">fsdp_error_t</a> result = <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>;
00840   
00841   <span class="keywordflow">if</span> ( 0 == *counter ) {
00842     *counter = 0;
00843     *rtpmap = calloc(<a class="code" href="priv_8h.html#a3">MEDIA_RTPMAPS_MAX_COUNT</a>,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__rtpmap__t.html">fsdp_rtpmap_t</a>*));
00844   }
00845   <span class="keywordflow">if</span> ( *counter &lt; <a class="code" href="priv_8h.html#a3">MEDIA_RTPMAPS_MAX_COUNT</a> ) {
00846     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> c = *counter;
00847     <a class="code" href="structfsdp__rtpmap__t.html">fsdp_rtpmap_t</a> **map = *rtpmap;
00848     <span class="keywordtype">char</span> fsdp_buf[<a class="code" href="parserpriv_8h.html#a0">MAXSHORTFIELDLEN</a>];
00849     <span class="keywordtype">char</span> longfsdp_buf[<a class="code" href="parserpriv_8h.html#a2">MAXLONGFIELDLEN</a>];
00850     map[c] = calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="structfsdp__rtpmap__t.html">fsdp_rtpmap_t</a>));
00851 
00852     <span class="comment">/* a=rtpmap:&lt;payload type&gt; &lt;encoding name&gt;/&lt;clock rate&gt;[/&lt;encoding</span>
00853 <span class="comment">       parameters]&gt; */</span>
00854     <span class="keywordflow">if</span> ( 2 == sscanf(value,<span class="stringliteral">"%s %s"</span>,fsdp_buf,longfsdp_buf) ) {
00855       <span class="keywordtype">char</span> *slash1;
00856       map[c]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o0">pt</a> = strdup(fsdp_buf);
00857       <span class="comment">/* parse &lt;encoding name&gt;/&lt;clock rate&gt;[/&lt;encoding parameters&gt;]*/</span>
00858       slash1 = strchr(longfsdp_buf,<span class="charliteral">'/'</span>);
00859       <span class="keywordflow">if</span> ( NULL == slash1 ) {
00860      result = <a class="code" href="group__common.html#a6a22">FSDPE_INVALID_ATTRIBUTE_RTPMAP</a>;
00861       } <span class="keywordflow">else</span> {
00862      <span class="keywordtype">char</span> *slash2;
00863      *slash1 = <span class="charliteral">'\0'</span>;
00864      slash1++;
00865      map[c]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o1">encoding_name</a> = strdup(longfsdp_buf);
00866      slash2 = strchr(slash1,<span class="charliteral">'/'</span>);
00867      <span class="keywordflow">if</span> ( NULL != slash2 ) {
00868        *slash2 = <span class="charliteral">'\0'</span>;
00869        slash2++;
00870        map[c]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o3">parameters</a> = strdup(slash2);
00871      }    
00872      map[c]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o2">clock_rate</a> = strtol(slash1,NULL,10);
00873       }
00874       (*counter)++;
00875     }
00876   }
00877   <span class="keywordflow">return</span> result;
00878 }
00879 
00880 <span class="keyword">static</span> <a class="code" href="group__common.html#a6">fsdp_error_t</a>
<a name="l00881"></a><a class="code" href="parser_8c.html#a6">00881</a> <a class="code" href="parserpriv_8h.html#a7">fsdp_repeat_time_to_uint</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *time, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> *seconds)
00882 {
00883   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> SECONDS_PER_DAY = 86400;
00884   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> SECONDS_PER_HOUR = 3600;
00885   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> SECONDS_PER_MINUTE = 60;
00886   <span class="keywordtype">char</span> c;
00887   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> wuint;
00888   
00889   <span class="keywordflow">if</span> ( sscanf(time,<span class="stringliteral">"%lu%c"</span>,&amp;wuint,&amp;c) == 2 ) {
00890     <span class="comment">/* time with unit specification character */</span>
00891     <span class="keywordflow">switch</span>(c) {
00892     <span class="keywordflow">case</span> <span class="charliteral">'d'</span>:
00893       *seconds = wuint * SECONDS_PER_DAY;
00894       <span class="keywordflow">break</span>;
00895     <span class="keywordflow">case</span> <span class="charliteral">'h'</span>:
00896       *seconds = wuint * SECONDS_PER_HOUR;
00897       <span class="keywordflow">break</span>;
00898     <span class="keywordflow">case</span> <span class="charliteral">'m'</span>:
00899       *seconds = wuint * SECONDS_PER_MINUTE;
00900       <span class="keywordflow">break</span>;
00901     <span class="keywordflow">case</span> <span class="charliteral">'s'</span>:
00902       *seconds = wuint;
00903       <span class="keywordflow">break</span>;
00904     <span class="keywordflow">default</span>:
00905       <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a18">FSDPE_INVALID_REPEAT</a>;
00906       <span class="keywordflow">break</span>;
00907     }
00908   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( sscanf(time,<span class="stringliteral">"%lu"</span>,&amp;wuint) == 1 ) {
00909     <span class="comment">/* time without unit specification character */</span>
00910     *seconds = wuint;
00911   } <span class="keywordflow">else</span> {
00912     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a18">FSDPE_INVALID_REPEAT</a>;
00913   }    
00914   <span class="keywordflow">return</span> <a class="code" href="group__common.html#a6a4">FSDPE_OK</a>;
00915 }
00916 
00917 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l00918"></a><a class="code" href="group__parser.html#a7">00918</a> <a class="code" href="group__parser.html#a7">fsdp_get_version</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00919 {
00920   <span class="keywordflow">if</span> ( NULL == dsc)
00921     <span class="keywordflow">return</span> 0;
00922   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o0">version</a>;
00923 }
00924 
00925 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00926"></a><a class="code" href="group__parser.html#a8">00926</a> <a class="code" href="group__parser.html#a8">fsdp_get_owner_username</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00927 {
00928   <span class="keywordflow">if</span> ( NULL == dsc)
00929     <span class="keywordflow">return</span> NULL;
00930   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o1">o_username</a>;
00931 }
00932 
00933 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00934"></a><a class="code" href="group__parser.html#a9">00934</a> <a class="code" href="group__parser.html#a9">fsdp_get_session_id</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00935 {
00936   <span class="keywordflow">if</span> ( NULL == dsc)
00937     <span class="keywordflow">return</span> NULL;
00938   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o2">o_session_id</a>;
00939 }
00940 
00941 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00942"></a><a class="code" href="group__parser.html#a10">00942</a> <a class="code" href="group__parser.html#a10">fsdp_get_announcement_version</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00943 {
00944   <span class="keywordflow">if</span> ( NULL == dsc)
00945     <span class="keywordflow">return</span> NULL;
00946   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o3">o_announcement_version</a>;
00947 }
00948 
00949 <a class="code" href="group__common.html#a7">fsdp_network_type_t</a>
<a name="l00950"></a><a class="code" href="group__parser.html#a11">00950</a> <a class="code" href="group__parser.html#a11">fsdp_get_owner_network_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00951 {
00952   <span class="keywordflow">if</span> ( NULL == dsc)
00953     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a7a34">FSDP_NETWORK_TYPE_UNDEFINED</a>;
00954   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o4">o_network_type</a>;
00955 }
00956 
00957 <a class="code" href="group__common.html#a8">fsdp_address_type_t</a>
<a name="l00958"></a><a class="code" href="group__parser.html#a12">00958</a> <a class="code" href="group__parser.html#a12">fsdp_get_owner_address_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00959 {
00960   <span class="keywordflow">if</span> ( NULL == dsc)
00961     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a8a36">FSDP_ADDRESS_TYPE_UNDEFINED</a>;
00962   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o5">o_address_type</a>;
00963 }
00964 
00965 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00966"></a><a class="code" href="group__parser.html#a13">00966</a> <a class="code" href="group__parser.html#a13">fsdp_get_owner_address</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00967 {
00968   <span class="keywordflow">if</span> ( NULL == dsc)
00969     <span class="keywordflow">return</span> NULL;
00970   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o6">o_address</a>;
00971 }
00972 
00973 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00974"></a><a class="code" href="group__parser.html#a14">00974</a> <a class="code" href="group__parser.html#a14">fsdp_get_name</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00975 {
00976   <span class="keywordflow">if</span> ( NULL == dsc)
00977     <span class="keywordflow">return</span> NULL;
00978   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o7">s_name</a>;
00979 }
00980 
00981 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00982"></a><a class="code" href="group__parser.html#a15">00982</a> <a class="code" href="group__parser.html#a15">fsdp_get_information</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00983 {
00984   <span class="keywordflow">if</span> ( NULL == dsc)
00985     <span class="keywordflow">return</span> NULL;
00986   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o8">i_information</a>;
00987 }
00988 
00989 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l00990"></a><a class="code" href="group__parser.html#a16">00990</a> <a class="code" href="group__parser.html#a16">fsdp_get_uri</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00991 {
00992   <span class="keywordflow">if</span> ( NULL == dsc)
00993     <span class="keywordflow">return</span> NULL;
00994   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o9">u_uri</a>;
00995 }
00996 
00997 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l00998"></a><a class="code" href="group__parser.html#a17">00998</a> <a class="code" href="group__parser.html#a17">fsdp_get_emails_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
00999 {
01000   <span class="keywordflow">if</span> ( NULL == dsc)
01001     <span class="keywordflow">return</span> 0;
01002   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o11">emails_count</a>;
01003 }
01004 
01005 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01006"></a><a class="code" href="group__parser.html#a18">01006</a> <a class="code" href="group__parser.html#a18">fsdp_get_email</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01007 {
01008   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o11">emails_count</a>) )
01009     <span class="keywordflow">return</span> NULL;
01010   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o10">emails</a>[index];
01011 }
01012 
01013 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01014"></a><a class="code" href="group__parser.html#a19">01014</a> <a class="code" href="group__parser.html#a19">fsdp_get_phones_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01015 {
01016   <span class="keywordflow">if</span> ( NULL == dsc)
01017     <span class="keywordflow">return</span> 0;
01018   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o13">phones_count</a>;
01019 }
01020 
01021 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01022"></a><a class="code" href="group__parser.html#a20">01022</a> <a class="code" href="group__parser.html#a20">fsdp_get_phone</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01023 {
01024   <span class="keywordflow">if</span> ( (NULL == dsc ) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o13">phones_count</a>) )
01025     <span class="keywordflow">return</span> NULL;
01026   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o12">phones</a>[index];
01027 }
01028 
01029 <a class="code" href="group__common.html#a7">fsdp_network_type_t</a>
<a name="l01030"></a><a class="code" href="group__parser.html#a21">01030</a> <a class="code" href="group__parser.html#a21">fsdp_get_global_conn_network_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01031 {
01032   <span class="keywordflow">if</span> ( NULL == dsc)
01033     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a7a34">FSDP_NETWORK_TYPE_UNDEFINED</a>;
01034   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o14">c_network_type</a>;
01035 }
01036 
01037 <a class="code" href="group__common.html#a8">fsdp_address_type_t</a>
<a name="l01038"></a><a class="code" href="group__parser.html#a22">01038</a> <a class="code" href="group__parser.html#a22">fsdp_get_global_conn_address_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01039 {
01040   <span class="keywordflow">if</span> ( NULL == dsc)
01041     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a8a36">FSDP_ADDRESS_TYPE_UNDEFINED</a>;
01042   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o15">c_address_type</a>;
01043 }
01044 
01045 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01046"></a><a class="code" href="group__parser.html#a23">01046</a> <a class="code" href="group__parser.html#a23">fsdp_get_global_conn_address</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01047 {
01048   <span class="keywordflow">if</span> ( NULL == dsc)
01049     <span class="keywordflow">return</span> NULL;
01050   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o16">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o0">address</a>;
01051 }
01052 
01053 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01054"></a><a class="code" href="group__parser.html#a24">01054</a> <a class="code" href="group__parser.html#a24">fsdp_get_global_conn_address_ttl</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01055 {
01056   <span class="keywordflow">if</span> ( NULL == dsc)
01057     <span class="keywordflow">return</span> 0;
01058   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o16">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o1">address_ttl</a>;
01059 }
01060 
01061 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01062"></a><a class="code" href="group__parser.html#a25">01062</a> <a class="code" href="group__parser.html#a25">fsdp_get_global_conn_address_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01063 {
01064   <span class="keywordflow">if</span> ( NULL == dsc)
01065     <span class="keywordflow">return</span> 0;
01066   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o16">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o2">address_count</a>;
01067 }
01068 
01069 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01070"></a><a class="code" href="group__parser.html#a26">01070</a> <a class="code" href="group__parser.html#a26">fsdp_get_bw_modifier_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01071 {
01072   <span class="keywordflow">if</span> ( (NULL == dsc) )
01073     <span class="keywordflow">return</span> 0;
01074   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o18">bw_modifiers_count</a>;
01075 }
01076 
01077 <a class="code" href="group__common.html#a9">fsdp_bw_modifier_type_t</a>
<a name="l01078"></a><a class="code" href="group__parser.html#a27">01078</a> <a class="code" href="group__parser.html#a27">fsdp_get_bw_modifier_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01079 {
01080   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o18">bw_modifiers_count</a>) ) 
01081     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a9a39">FSDP_BW_MOD_TYPE_UNDEFINED</a>;
01082   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o17">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o0">b_mod_type</a>;
01083 }
01084 
01085 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01086"></a><a class="code" href="group__parser.html#a28">01086</a> <a class="code" href="group__parser.html#a28">fsdp_get_bw_modifier_type_unknown</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01087                       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01088 {
01089   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o18">bw_modifiers_count</a>) ||
01090        (dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o17">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o0">b_mod_type</a> != <a class="code" href="group__common.html#a9a40">FSDP_BW_MOD_TYPE_UNKNOWN</a>) )
01091     <span class="keywordflow">return</span> NULL;
01092   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o17">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o2">b_unknown_bw_modt</a>;
01093 }
01094 
01095 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>
<a name="l01096"></a><a class="code" href="group__parser.html#a29">01096</a> <a class="code" href="group__parser.html#a29">fsdp_get_bw_value</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01097 {
01098   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o18">bw_modifiers_count</a>) )
01099     <span class="keywordflow">return</span> 0;
01100   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o17">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o1">b_value</a>;
01101 }
01102 
01103 time_t
<a name="l01104"></a><a class="code" href="group__parser.html#a30">01104</a> <a class="code" href="group__parser.html#a30">fsdp_get_period_start</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01105 {
01106   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>) )
01107     <span class="keywordflow">return</span> 0;
01108   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[index]-&gt;<a class="code" href="structfsdp__time__period__t.html#o0">start</a>;
01109 }
01110 
01111 time_t
<a name="l01112"></a><a class="code" href="group__parser.html#a31">01112</a> <a class="code" href="group__parser.html#a31">fsdp_get_period_stop</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01113 {
01114   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>) )
01115     <span class="keywordflow">return</span> 0;
01116   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[index]-&gt;<a class="code" href="structfsdp__time__period__t.html#o1">stop</a>;
01117 }
01118 
01119 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01120"></a><a class="code" href="group__parser.html#a32">01120</a> <a class="code" href="group__parser.html#a32">fsdp_get_period_repeats_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01121                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01122 {
01123   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>) )
01124        <span class="keywordflow">return</span> 0;
01125   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[index]-&gt;<a class="code" href="structfsdp__time__period__t.html#o3">repeats_count</a>;
01126 }
01127 
01128 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>
<a name="l01129"></a><a class="code" href="group__parser.html#a33">01129</a> <a class="code" href="group__parser.html#a33">fsdp_get_period_repeat_interval</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01130                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rindex)
01131 {
01132   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>) )
01133      <span class="keywordflow">return</span> 0;
01134   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[index]-&gt;<a class="code" href="structfsdp__time__period__t.html#o2">repeats</a>[rindex]-&gt;<a class="code" href="structfsdp__repeat__t.html#o0">interval</a>;
01135 }
01136 
01137 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>
<a name="l01138"></a><a class="code" href="group__parser.html#a34">01138</a> <a class="code" href="group__parser.html#a34">fsdp_get_period_repeat_duration</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01139                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rindex)
01140 {
01141   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>) )
01142     <span class="keywordflow">return</span> 0;
01143   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[index]-&gt;<a class="code" href="structfsdp__time__period__t.html#o2">repeats</a>[rindex]-&gt;<a class="code" href="structfsdp__repeat__t.html#o1">duration</a>;
01144 }
01145 
01146 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> *
<a name="l01147"></a><a class="code" href="group__parser.html#a35">01147</a> <a class="code" href="group__parser.html#a35">fsdp_get_period_repeat_offsets</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01148                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rindex)
01149 {
01150   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o20">time_periods_count</a>) )
01151     <span class="keywordflow">return</span> NULL;
01152   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o19">time_periods</a>[index]-&gt;<a class="code" href="structfsdp__time__period__t.html#o2">repeats</a>[rindex]-&gt;<a class="code" href="structfsdp__repeat__t.html#o2">offsets</a>;
01153 }
01154 
01155 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01156"></a><a class="code" href="group__parser.html#a36">01156</a> <a class="code" href="group__parser.html#a36">fsdp_get_timezone_adj</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01157 {
01158   <span class="keywordflow">if</span> ( NULL == dsc )
01159     <span class="keywordflow">return</span> NULL;
01160   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o21">timezone_adj</a>;
01161 }
01162 
01163 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01164"></a><a class="code" href="group__parser.html#a37">01164</a> <a class="code" href="group__parser.html#a37">fsdp_get_unidentified_attribute_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01165 {
01166   <span class="keywordflow">if</span> ( NULL == dsc )
01167     <span class="keywordflow">return</span> 0;
01168   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a>;
01169 }
01170 
01171 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01172"></a><a class="code" href="group__parser.html#a38">01172</a> <a class="code" href="group__parser.html#a38">fsdp_get_unidentified_attribute</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01173                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01174 {
01175   <span class="keywordflow">if</span> ( NULL == dsc || (index &lt; dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o36">unidentified_attributes_count</a>) )
01176     <span class="keywordflow">return</span> NULL;
01177   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o35">unidentified_attributes</a>[index];
01178 }
01179 
01180 <a class="code" href="group__common.html#a10">fsdp_encryption_method_t</a>
<a name="l01181"></a><a class="code" href="group__parser.html#a39">01181</a> <a class="code" href="group__parser.html#a39">fsdp_get_encryption_method</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01182 {
01183   <span class="keywordflow">if</span> ( NULL == dsc )
01184     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a10a45">FSDP_ENCRYPTION_METHOD_UNDEFINED</a>;
01185   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o22">k_encryption_method</a>;
01186 }
01187 
01188 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01189"></a><a class="code" href="group__parser.html#a40">01189</a> <a class="code" href="group__parser.html#a40">fsdp_get_encryption_content</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01190 {
01191   <span class="keywordflow">if</span> ( (NULL == dsc) || 
01192        (dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o22">k_encryption_method</a> == <a class="code" href="group__common.html#a10a45">FSDP_ENCRYPTION_METHOD_UNDEFINED</a>) )
01193     <span class="keywordflow">return</span> NULL;
01194   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o23">k_encryption_content</a>;
01195 }
01196 
01197 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01198"></a><a class="code" href="parser_8c.html#a41">01198</a> <a class="code" href="parser_8c.html#a41">fsdp_get_rtpmap_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01199 {
01200   <span class="keywordflow">if</span> ( NULL == dsc)
01201     <span class="keywordflow">return</span> 0;
01202   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>;
01203 }
01204 
01205 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01206"></a><a class="code" href="parser_8c.html#a42">01206</a> <a class="code" href="parser_8c.html#a42">fsdp_get_rtpmap_payload_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01207 {
01208   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>) )
01209     <span class="keywordflow">return</span> NULL;
01210   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o25">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o0">pt</a>;
01211 }
01212 
01213 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01214"></a><a class="code" href="parser_8c.html#a43">01214</a> <a class="code" href="parser_8c.html#a43">fsdp_get_rtpmap_encoding_name</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01215                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01216 {
01217   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>) )
01218     <span class="keywordflow">return</span> NULL;
01219   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o25">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o1">encoding_name</a>;
01220 }
01221 
01222 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01223"></a><a class="code" href="parser_8c.html#a44">01223</a> <a class="code" href="parser_8c.html#a44">fsdp_get_rtpmap_clock_rate</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01224 {
01225   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>) )
01226     <span class="keywordflow">return</span> 0;
01227   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o25">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o2">clock_rate</a>;
01228 }
01229 
01230 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01231"></a><a class="code" href="parser_8c.html#a45">01231</a> <a class="code" href="parser_8c.html#a45">fsdp_get_rtpmap_encoding_parameters</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, 
01232                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01233 {
01234   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>) )
01235     <span class="keywordflow">return</span> NULL;
01236   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o25">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o3">parameters</a>;
01237 }
01238 
01239 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01240"></a><a class="code" href="group__parser.html#a46">01240</a> <a class="code" href="group__parser.html#a46">fsdp_get_str_att</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, fsdp_session_str_att_t att)
01241 {
01242   <span class="keywordtype">char</span> *result;
01243   <span class="keywordflow">if</span> ( NULL == dsc )
01244     <span class="keywordflow">return</span> NULL;
01245   <span class="keywordflow">if</span> ( att &lt;= <a class="code" href="group__common.html#a16a84">FSDP_LAST_SESSION_STR_ATT</a> ) 
01246     result = dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o24">a_str_attributes</a>[att];
01247   <span class="keywordflow">else</span>
01248     result = NULL;
01249   <span class="keywordflow">return</span> result;
01250 }
01251 
01252 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01253"></a><a class="code" href="group__parser.html#a47">01253</a> <a class="code" href="group__parser.html#a47">fsdp_get_sdplang_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01254 {
01255   <span class="keywordflow">if</span> ( NULL == dsc )
01256     <span class="keywordflow">return</span> 0;
01257   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a>;
01258 }
01259 
01260 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01261"></a><a class="code" href="group__parser.html#a48">01261</a> <a class="code" href="group__parser.html#a48">fsdp_get_sdplang</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01262 {
01263   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o30">a_sdplangs_count</a>) )
01264     <span class="keywordflow">return</span> NULL;
01265   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o29">a_sdplangs</a>[index];
01266 }
01267 
01268 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01269"></a><a class="code" href="parser_8c.html#a49">01269</a> <a class="code" href="parser_8c.html#a49">fsdp_get_lang_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01270 {
01271   <span class="keywordflow">if</span> ( NULL == dsc )
01272     <span class="keywordflow">return</span> 0;
01273   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a>;
01274 }
01275 
01276 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01277"></a><a class="code" href="parser_8c.html#a50">01277</a> <a class="code" href="parser_8c.html#a50">fsdp_get_lang</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01278 {
01279   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o32">a_langs_count</a>) )
01280     <span class="keywordflow">return</span> NULL;
01281   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o31">a_langs</a>[index];
01282 }
01283 
01284 <a class="code" href="group__common.html#a11">fsdp_sendrecv_mode_t</a>
<a name="l01285"></a><a class="code" href="group__parser.html#a51">01285</a> <a class="code" href="group__parser.html#a51">fsdp_get_sendrecv_mode</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01286 {
01287   <span class="keywordflow">if</span> ( NULL == dsc )
01288     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a11a50">FSDP_SENDRECV_UNDEFINED</a>;
01289   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o27">a_sendrecv_mode</a>;
01290 }
01291 
01292 <a class="code" href="group__common.html#a13">fsdp_session_type_t</a>
<a name="l01293"></a><a class="code" href="group__parser.html#a52">01293</a> <a class="code" href="group__parser.html#a52">fsdp_get_session_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01294 {
01295   <span class="keywordflow">if</span> ( NULL == dsc )
01296     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a13a59">FSDP_SESSION_TYPE_UNDEFINED</a>;
01297   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o28">a_type</a>;
01298 }
01299 
01300 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01301"></a><a class="code" href="group__parser.html#a53">01301</a> <a class="code" href="group__parser.html#a53">fsdp_get_media_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc)
01302 {
01303   <span class="keywordflow">if</span> ( NULL == dsc )
01304     <span class="keywordflow">return</span> 0;
01305   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o34">media_announcements_count</a>;
01306 }
01307 
01308 <span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a>*
<a name="l01309"></a><a class="code" href="group__parser.html#a54">01309</a> <a class="code" href="group__parser.html#a54">fsdp_get_media</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01310 {
01311   <span class="keywordflow">if</span> ( (index &gt;= dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o34">media_announcements_count</a>) )
01312     <span class="keywordflow">return</span> NULL;
01313   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o33">media_announcements</a>[index];
01314 }
01315 
01316 <a class="code" href="group__common.html#a14">fsdp_media_t</a>
<a name="l01317"></a><a class="code" href="group__parser.html#a55">01317</a> <a class="code" href="group__parser.html#a55">fsdp_get_media_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01318 {
01319   <span class="keywordflow">if</span> ( (NULL == dsc) )
01320     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a14a65">FSDP_MEDIA_UNDEFINED</a>;
01321   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o0">media_type</a>;
01322 }
01323 
01324 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01325"></a><a class="code" href="group__parser.html#a56">01325</a> <a class="code" href="group__parser.html#a56">fsdp_get_media_port</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01326 {
01327   <span class="keywordflow">if</span> ( (NULL == dsc) )
01328     <span class="keywordflow">return</span> 0;
01329   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o1">port</a>;
01330 }
01331 
01332 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01333"></a><a class="code" href="group__parser.html#a57">01333</a> <a class="code" href="group__parser.html#a57">fsdp_get_media_port_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01334 {
01335   <span class="keywordflow">if</span> ( (NULL == dsc) )
01336     <span class="keywordflow">return</span> 0;
01337   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o2">port_count</a>;
01338 }
01339 
01340 <a class="code" href="group__common.html#a15">fsdp_transport_protocol_t</a>
<a name="l01341"></a><a class="code" href="group__parser.html#a58">01341</a> <a class="code" href="group__parser.html#a58">fsdp_get_media_transport_protocol</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01342 {
01343   <span class="keywordflow">if</span> ( (NULL == dsc) )
01344     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a15a72">FSDP_TP_UNDEFINED</a>;
01345   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o3">transport</a>;
01346 }
01347 
01348 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01349"></a><a class="code" href="parser_8c.html#a59">01349</a> <a class="code" href="parser_8c.html#a59">fsdp_get_media_formats_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01350 {
01351   <span class="keywordflow">if</span> ( (NULL == dsc) )
01352     <span class="keywordflow">return</span> 0;
01353   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o5">formats_count</a>;
01354 }
01355 
01356 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01357"></a><a class="code" href="parser_8c.html#a60">01357</a> <a class="code" href="parser_8c.html#a60">fsdp_get_media_format</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01358 {
01359   <span class="keywordflow">if</span> ( (NULL == dsc) &amp;&amp; (index &lt; dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o5">formats_count</a>) )
01360     <span class="keywordflow">return</span> NULL;
01361   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o4">formats</a>[index];
01362 }
01363 
01364 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01365"></a><a class="code" href="group__parser.html#a61">01365</a> <a class="code" href="group__parser.html#a61">fsdp_get_media_title</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01366 {
01367   <span class="keywordflow">if</span> ( (NULL == dsc) )
01368     <span class="keywordflow">return</span> NULL;
01369   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o6">i_title</a>;
01370 }
01371 
01372 <a class="code" href="group__common.html#a7">fsdp_network_type_t</a> 
<a name="l01373"></a><a class="code" href="group__parser.html#a62">01373</a> <a class="code" href="group__parser.html#a62">fsdp_get_media_network_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01374 {
01375   <span class="keywordflow">if</span> ( (NULL == dsc) )
01376     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a7a34">FSDP_NETWORK_TYPE_UNDEFINED</a>;
01377   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o7">c_network_type</a>;
01378 }
01379 
01380 <a class="code" href="group__common.html#a8">fsdp_address_type_t</a> 
<a name="l01381"></a><a class="code" href="group__parser.html#a63">01381</a> <a class="code" href="group__parser.html#a63">fsdp_get_media_address_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01382 {
01383   <span class="keywordflow">if</span> ( (NULL == dsc) )
01384     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a8a36">FSDP_ADDRESS_TYPE_UNDEFINED</a>;
01385   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o8">c_address_type</a>;
01386 }
01387 
01388 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01389"></a><a class="code" href="group__parser.html#a64">01389</a> <a class="code" href="group__parser.html#a64">fsdp_get_media_address</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01390 {
01391   <span class="keywordflow">if</span> ( (NULL == dsc) )
01392     <span class="keywordflow">return</span> NULL;
01393   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o9">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o0">address</a>;
01394 }
01395 
01396 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01397"></a><a class="code" href="group__parser.html#a65">01397</a> <a class="code" href="group__parser.html#a65">fsdp_get_media_address_ttl</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc)
01398 {
01399   <span class="keywordflow">if</span> ( NULL == mdsc )
01400     <span class="keywordflow">return</span> 0;
01401   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o9">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o1">address_ttl</a>;
01402 }
01403 
01404 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01405"></a><a class="code" href="group__parser.html#a66">01405</a> <a class="code" href="group__parser.html#a66">fsdp_get_media_address_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc)
01406 {
01407   <span class="keywordflow">if</span> ( NULL == mdsc)
01408     <span class="keywordflow">return</span> 0;
01409   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o9">c_address</a>.<a class="code" href="structfsdp__connection__address__t__s.html#o2">address_count</a>;
01410 }
01411 
01412 <a class="code" href="group__common.html#a9">fsdp_bw_modifier_type_t</a>
<a name="l01413"></a><a class="code" href="group__parser.html#a67">01413</a> <a class="code" href="group__parser.html#a67">fsdp_get_media_bw_modifier_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc, 
01414                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01415 {
01416   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o11">bw_modifiers_count</a>) )
01417     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a9a39">FSDP_BW_MOD_TYPE_UNDEFINED</a>;
01418   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o10">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o0">b_mod_type</a>;
01419 }
01420 
01421 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01422"></a><a class="code" href="group__parser.html#a68">01422</a> <a class="code" href="group__parser.html#a68">fsdp_get_media_bw_modifier_type_unknown</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc, 
01423                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01424 {
01425   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o11">bw_modifiers_count</a>) ||
01426        (<a class="code" href="group__common.html#a9a40">FSDP_BW_MOD_TYPE_UNKNOWN</a> != dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o10">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o0">b_mod_type</a>) )
01427     <span class="keywordflow">return</span> NULL;
01428   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o10">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o2">b_unknown_bw_modt</a>;
01429 }
01430 
01431 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span>
<a name="l01432"></a><a class="code" href="group__parser.html#a69">01432</a> <a class="code" href="group__parser.html#a69">fsdp_get_media_bw_value</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc, 
01433                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01434 {
01435   <span class="keywordflow">if</span> ( (NULL == dsc) || (index &gt;= dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o11">bw_modifiers_count</a>) ) 
01436     <span class="keywordflow">return</span> 0;
01437   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o10">bw_modifiers</a>[index].<a class="code" href="structfsdp__bw__modifier__t.html#o1">b_value</a>;
01438 }
01439 
01440 <a class="code" href="group__common.html#a10">fsdp_encryption_method_t</a>
<a name="l01441"></a><a class="code" href="group__parser.html#a70">01441</a> <a class="code" href="group__parser.html#a70">fsdp_get_media_encryption_method</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01442 {
01443   <span class="keywordflow">if</span> ( (NULL == dsc) )
01444     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a10a45">FSDP_ENCRYPTION_METHOD_UNDEFINED</a>;
01445   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o12">k_encryption_method</a>;
01446 }
01447 
01448 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01449"></a><a class="code" href="group__parser.html#a71">01449</a> <a class="code" href="group__parser.html#a71">fsdp_get_media_encryption_content</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01450 {
01451   <span class="keywordflow">if</span> ( (NULL == dsc) )
01452     <span class="keywordflow">return</span> NULL;
01453   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o13">k_encryption_content</a>;
01454 }
01455 
01456 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> 
<a name="l01457"></a><a class="code" href="group__parser.html#a72">01457</a> <a class="code" href="group__parser.html#a72">fsdp_get_media_ptime</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01458 {
01459   <span class="keywordflow">if</span> ( (NULL == dsc) )
01460     <span class="keywordflow">return</span> 0;
01461   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o14">a_ptime</a>;
01462 }
01463 
01464 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01465"></a><a class="code" href="group__parser.html#a73">01465</a> <a class="code" href="group__parser.html#a73">fsdp_get_media_maxptime</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01466 {
01467   <span class="keywordflow">if</span> ( (NULL == dsc) )
01468     <span class="keywordflow">return</span> 0;
01469   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o15">a_maxptime</a>;
01470 }
01471 
01472 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01473"></a><a class="code" href="group__parser.html#a74">01473</a> <a class="code" href="group__parser.html#a74">fsdp_get_media_rtpmap_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc)
01474 {
01475   <span class="keywordflow">if</span> ( NULL == mdsc)
01476     <span class="keywordflow">return</span> 0;
01477   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o17">a_rtpmaps_count</a>;
01478 }
01479 
01480 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01481"></a><a class="code" href="group__parser.html#a75">01481</a> <a class="code" href="group__parser.html#a75">fsdp_get_media_rtpmap_payload_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc,
01482                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01483 {
01484   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o17">a_rtpmaps_count</a>) )
01485     <span class="keywordflow">return</span> NULL;
01486   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o16">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o0">pt</a>;
01487 }
01488 
01489 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01490"></a><a class="code" href="group__parser.html#a76">01490</a> <a class="code" href="group__parser.html#a76">fsdp_get_media_rtpmap_encoding_name</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc,
01491                         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01492 {
01493   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o17">a_rtpmaps_count</a>) )
01494     <span class="keywordflow">return</span> NULL;
01495   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o16">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o1">encoding_name</a>;
01496 }
01497 
01498 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01499"></a><a class="code" href="group__parser.html#a77">01499</a> <a class="code" href="group__parser.html#a77">fsdp_get_media_rtpmap_clock_rate</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc,
01500                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01501 {
01502   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o17">a_rtpmaps_count</a>) )
01503     <span class="keywordflow">return</span> 0;
01504   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o16">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o2">clock_rate</a>;
01505 }
01506 
01507 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01508"></a><a class="code" href="group__parser.html#a78">01508</a> <a class="code" href="group__parser.html#a78">fsdp_get_media_rtpmap_encoding_parameters</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__description__t__s.html">fsdp_description_t</a> *mdsc, 
01509                            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01510 {
01511   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o26">a_rtpmaps_count</a>) )
01512     <span class="keywordflow">return</span> NULL;
01513   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__description__t__s.html#o25">a_rtpmaps</a>[index]-&gt;<a class="code" href="structfsdp__rtpmap__t.html#o3">parameters</a>;
01514 }
01515 
01516 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01517"></a><a class="code" href="group__parser.html#a79">01517</a> <a class="code" href="group__parser.html#a79">fsdp_get_media_sdplang_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc)
01518 {
01519   <span class="keywordflow">if</span> ( NULL == mdsc )
01520     <span class="keywordflow">return</span> 0;
01521   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o21">a_sdplangs_count</a>;
01522 }
01523 
01524 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01525"></a><a class="code" href="group__parser.html#a80">01525</a> <a class="code" href="group__parser.html#a80">fsdp_get_media_sdplang</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc, 
01526                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01527 {
01528   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o21">a_sdplangs_count</a>) )
01529     <span class="keywordflow">return</span> NULL;
01530   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o20">a_sdplangs</a>[index];
01531 }
01532 
01533 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01534"></a><a class="code" href="group__parser.html#a81">01534</a> <a class="code" href="group__parser.html#a81">fsdp_get_media_lang_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc)
01535 {
01536   <span class="keywordflow">if</span> ( NULL == mdsc )
01537     <span class="keywordflow">return</span> 0;
01538   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o23">a_langs_count</a>;
01539 }
01540 
01541 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01542"></a><a class="code" href="group__parser.html#a82">01542</a> <a class="code" href="group__parser.html#a82">fsdp_get_media_lang</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc, 
01543                  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01544 {
01545   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o23">a_langs_count</a>) )
01546     <span class="keywordflow">return</span> NULL;
01547   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o22">a_langs</a>[index];
01548 }
01549 
01550 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01551"></a><a class="code" href="group__parser.html#a83">01551</a> <a class="code" href="group__parser.html#a83">fsdp_get_media_fmtp_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc)
01552 {
01553   <span class="keywordflow">if</span> ( NULL == mdsc )
01554     <span class="keywordflow">return</span> 0;
01555   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o27">a_fmtps_count</a>;
01556 }
01557 
01558 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01559"></a><a class="code" href="group__parser.html#a84">01559</a> <a class="code" href="group__parser.html#a84">fsdp_get_media_fmtp</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01560 {
01561   <span class="keywordflow">if</span> ( (NULL == mdsc) || (index &gt;= mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o27">a_fmtps_count</a>) )
01562     <span class="keywordflow">return</span> NULL;
01563   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o26">a_fmtps</a>[index];
01564 }
01565 
01566 <a class="code" href="group__common.html#a12">fsdp_orient_t</a>
<a name="l01567"></a><a class="code" href="group__parser.html#a85">01567</a> <a class="code" href="group__parser.html#a85">fsdp_get_media_orient</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01568 {
01569   <span class="keywordflow">if</span> ( (NULL == dsc) )
01570     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a12a55">FSDP_ORIENT_UNDEFINED</a>;
01571   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o18">a_orient</a>;
01572 }
01573 
01574 <a class="code" href="group__common.html#a11">fsdp_sendrecv_mode_t</a>
<a name="l01575"></a><a class="code" href="group__parser.html#a86">01575</a> <a class="code" href="group__parser.html#a86">fsdp_get_media_sendrecv</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01576 {
01577   <span class="keywordflow">if</span> ( (NULL == dsc) )
01578     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a11a50">FSDP_SENDRECV_UNDEFINED</a>;
01579   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o19">a_sendrecv_mode</a>;
01580 }
01581 
01582 <span class="keywordtype">float</span>
<a name="l01583"></a><a class="code" href="group__parser.html#a87">01583</a> <a class="code" href="group__parser.html#a87">fsdp_get_media_framerate</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01584 {
01585   <span class="keywordflow">if</span> ( (NULL == dsc) )
01586     <span class="keywordflow">return</span> 0;
01587   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o24">a_framerate</a>;
01588 }
01589 
01590 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01591"></a><a class="code" href="group__parser.html#a88">01591</a> <a class="code" href="group__parser.html#a88">fsdp_get_media_quality</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01592 {
01593   <span class="keywordflow">if</span> ( (NULL == dsc) )
01594     <span class="keywordflow">return</span> 0;
01595   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o25">a_quality</a>;
01596 }
01597 
01598 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01599"></a><a class="code" href="group__parser.html#a89">01599</a> <a class="code" href="group__parser.html#a89">fsdp_get_media_rtcp_port</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01600 {
01601   <span class="keywordflow">if</span> ( (NULL == dsc) )
01602     <span class="keywordflow">return</span> 0;
01603   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o28">a_rtcp_port</a>;
01604 }
01605 
01606 <a class="code" href="group__common.html#a7">fsdp_network_type_t</a>
<a name="l01607"></a><a class="code" href="group__parser.html#a90">01607</a> <a class="code" href="group__parser.html#a90">fsdp_get_media_rtcp_network_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01608 {
01609   <span class="keywordflow">if</span> ( (NULL == dsc) )
01610     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a7a34">FSDP_NETWORK_TYPE_UNDEFINED</a>;
01611   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o29">a_rtcp_network_type</a>;
01612 }
01613 
01614 <a class="code" href="group__common.html#a8">fsdp_address_type_t</a>
<a name="l01615"></a><a class="code" href="group__parser.html#a91">01615</a> <a class="code" href="group__parser.html#a91">fsdp_get_media_rtcp_address_type</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01616 {
01617   <span class="keywordflow">if</span> ( (NULL == dsc) )
01618     <span class="keywordflow">return</span> <a class="code" href="group__common.html#a8a36">FSDP_ADDRESS_TYPE_UNDEFINED</a>;
01619   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o30">a_rtcp_address_type</a>;
01620 }
01621 
01622 <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l01623"></a><a class="code" href="group__parser.html#a92">01623</a> <a class="code" href="group__parser.html#a92">fsdp_get_media_rtcp_address</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *dsc)
01624 {
01625   <span class="keywordflow">if</span> ( (NULL == dsc) )
01626     <span class="keywordflow">return</span> NULL;
01627   <span class="keywordflow">return</span> dsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o31">a_rtcp_address</a>;
01628 }
01629 
01630 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>
<a name="l01631"></a><a class="code" href="group__parser.html#a93">01631</a> <a class="code" href="group__parser.html#a93">fsdp_get_media_unidentified_attribute_count</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a>
01632                              *mdsc)
01633 {
01634   <span class="keywordflow">if</span> ( NULL == mdsc )
01635     <span class="keywordflow">return</span> 0;
01636   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a>;
01637 }
01638 
01639 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l01640"></a><a class="code" href="group__parser.html#a94">01640</a> <a class="code" href="group__parser.html#a94">fsdp_get_media_unidentified_attribute</a>(<span class="keyword">const</span> <a class="code" href="structfsdp__media__description__t__s.html">fsdp_media_description_t</a> *mdsc,
01641                           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
01642 {
01643   <span class="keywordflow">if</span> ( NULL == mdsc || (index &lt; mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o33">unidentified_attributes_count</a>) )
01644     <span class="keywordflow">return</span> NULL;
01645   <span class="keywordflow">return</span> mdsc-&gt;<a class="code" href="structfsdp__media__description__t__s.html#o32">unidentified_attributes</a>[index];
01646 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Jan 18 21:12:44 2004 for FreeSDP by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
